# 20250521



# 20240823

$$ x_n = x_{n-1} \cdot (1 + R) - y $$

## ToDo 20240823

1. 测试我的固件库在6 blocks、5 blocks、4 blocks下的表现
2. 升级亚克力板机库，可以调节高度，并且四面封闭，同时拐角处要尽量减少放光。当前发现在亚克力板下面，对crazyflie的position识别会不同，大概2mm的影响。

## Log 20240823

1. Today, I change the crazyflie from ground to table, and test the hover on the table. The table height is 0.789m, and I set the offset height to 0.04m. The actual height is 0.789+0.04=0.829m. Each time the crazyflie take off from the same position(0.0, 0.0, 0.789). The max overshoot is 0.02m, setting the SET_DELAY value to 15s is enough to converge to the set height.
2.  我已经测试完了下降穿越，也测试了多次，发现在6块积木下这都不是问题。测试的时候每次起飞或降落等切换高度的时候，都要等待一段时间，让控制器的过冲收敛到设定值。这个时间是多少呢？我发现15s是一个比较合适的值。
3. 接下来搞清楚一下有没有速度控制？还是只是位置控制？

4. 接下来可以测试一下我自己编写的固件库。


# 20240822

## ToDo 20240822

## Log 20240822

1. 今天发现了一个问题，crazyflie的高度控制不准确，比如设定的高度是0.44m，但实际飞行的高度是0.498m。经过实验发现是因为超调导致的，需要时间来使得高度收敛到设定值，可能大概得15秒钟左右。
2. Marker在4块积木的高度下经常丢失，可能是亚克力板距离marker太近了，影响marker的识别。所以在4块积木下没有办法稳定悬停。但6块积木悬停是可以的，明天可以试试5块积木的高度。
3. 今天看了代码，还没搞清楚到底有没有控制速度，还是只是位置控制。因为最终只是发送了位置packet。

# 20240821

## ToDo 20240821

1. 测试悬停极限
2. 测试长距离（当前亚克力板300mm*500mm）穿越
3. 测试下降穿越，
4. 搞清楚crazyflie在飞8字、螺旋上升等轨迹的时候有没有控制速度，还是只是位置控制

## Log 20240821

1. `take_off()`函数不准确，z轴的高度比设定值高，（设定为0.5，但最终飞了0.56）它的逻辑有问题，指定了速度、和目标位置，然后通过距离/速度计算出所需的时间，所以是一个开环的控制吗？

# 20240607

## ToDo 20240607

1. 增加对动捕数据的记录代码，可以实时记录位置和姿态，记录速度，用来分析。
2. 修改底层控制器，并测试效果。目前已经可以从动捕获取到crazyflie的高度，可以测试CE和GE经典公式效果了。
当前的亚克力板高度是200mm，crazy螺旋桨的半径是23mm。后续考虑缩小点高度，缩小到在8R=8*23=184mm，或者6R=6*23=138mm。
